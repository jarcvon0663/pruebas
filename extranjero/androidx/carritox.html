<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Carrito de compras de Videojuegos Retro. Compra y paga fácilmente tus videojuegos favoritos.">
    <title>Videojuegos Retro - Carrito</title>

    <link rel="icon" type="image/x-icon" href="../../img/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" as="style"
        onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    </noscript>
    <link rel="stylesheet" href="../../css/main.css">

</head>

<body>
    <div class="wrapper">
        <header class="header-mobile">
            <img class="logo-img" src="../../img/logo.png" alt="Logo de Videojuegos Retro">
            <h1 class="logo">Videojuegosretro</h1>
            <button class="open-menu" id="open-menu">
                <i class="bi bi-list" aria-label="Abrir menú"></i>
            </button>
        </header>
        <aside>
            <nav>
                <ul>
                    <li>
                        <a class="boton-menu boton-volver" href="./androidx.html">
                            <i class="bi bi-arrow-return-left"></i> Seguir comprando
                        </a>
                    </li>
                    <li>
                        <a class="boton-menu boton-carrito active" href="./carritox.html">
                            <i class="bi bi-cart-fill"></i> Carrito
                        </a>
                    </li>
                </ul>
            </nav>
            <footer>
                <p class="texto-footer">© 2023 Videojuegos</p>
            </footer>
        </aside>
        <main>
            <h2 class="titulo-principal">Carrito de compras</h2>
            <div class="contenedor-carrito">
                <p id="carrito-vacio" class="carrito-vacio">Tu carrito de compras está vacío. <i
                        class="bi bi-emoji-frown"></i></p>

                <div id="carrito-productos" class="carrito-productos disabled">
                    <!-- Esto se va a completar con el JS -->
                </div>

                <div id="carrito-acciones" class="carrito-acciones disabled">
                    <div class="carrito-acciones-izquierda">
                        <button id="carrito-acciones-vaciar" class="carrito-acciones-vaciar">Vaciar carrito de
                            compras</button>
                    </div>
                    <div class="carrito-acciones-derecha">
                        <div class="carrito-acciones-total">
                            <p id="descuento"></p> <!-- Aquí se mostrará el valor del descuento -->
                            <p>Total:</p>
                            <p id="total">$3000</p>
                        </div>
                    </div>
                </div>

                <section class="payment-method">
                    <div class="mediosdepago">
                        <a id="pagar-link" href="#" onclick="pagarx(event)" rel="noopener noreferrer" target="_blank">
                            <img class="medio" src="../../img/pagar.png" style="height: 90px; width: 270px;" alt="">
                        </a>
                        <script>
                            function pagarx(event) {
                                // Evitar que se abra la página por defecto
                                event.preventDefault();

                                // Obtener los títulos de los videojuegos en el carrito
                                const carrito = JSON.parse(localStorage.getItem("productos-en-carrito")) || [];
                                const titulos = carrito.map(producto => producto.titulo);

                                // Crear el mensaje con los títulos de los videojuegos
                                const mensaje = encodeURIComponent(`Hola, por favor crear una orden de compra en paypal para los siguientes juegos: ${titulos.join(', ')}`);

                                // Construir el enlace de WhatsApp con el mensaje generado
                                const whatsappUrl = `https://api.whatsapp.com/send?phone=573042672810&text=${mensaje}`;

                                // Abrir el enlace de WhatsApp en una nueva pestaña
                                window.open(whatsappUrl, '_blank', 'noopener,noreferrer');
                            }
                        </script>
                    </div>
                </section>
                <section>
                    <a id="whatsapp-link" href="#" onclick="actualizarMensaje(event)" rel="noopener noreferrer"
                        target="_blank">
                        <img style="height: 100px; width: 300px;" src="../../img/whatsapp.png" alt="WhatsApp">
                        <br>
                        <p>Envia el comprobante de pago a nuestro whatsapp indicando el nombre del videojuego y te
                            llegará en respuesta el enlace de descarga del juego y demás archivos necesarios, al
                            descargarlos haremos videollamada para guiarte en la instalación y configuración del juego
                            en tu celular.</p>
                    </a>
                </section>

                <p id="carrito-comprado" class="carrito-comprado disabled">Muchas gracias por tu compra. <i
                        class="bi bi-emoji-laughing"></i></p>
            </div>
        </main>
        <a href="./androidx.html" class="boton-flotante">Volver al catálogo</a>
    </div>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="./js/carritoandroidx.js"></script>
    <script src="../../js/menu.js"></script>
</body>

</html>
